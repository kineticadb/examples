{"workbook":{"metadata":{},"config":{},"id":"5ead48d0-54e6-11ee-aa11-e58f0eca7592","name":"Real-Time Route Optimization and Alerting","description":"","user_id":"46523970-0f78-11ee-923c-8fcc28f78a58","warehouse_id":null,"is_example":false,"is_shared":false,"created_at":"2023-09-16T23:11:30.269Z","updated_at":"2023-10-08T01:01:52.956Z","userId":"46523970-0f78-11ee-923c-8fcc28f78a58"},"worksheets":[{"config":{},"id":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","name":"Data","description":"Description for Sheet 1","previous_worksheet_id":"262418e0-5edc-11ee-b6ac-53c29e67568d","next_worksheet_id":"21a2f3d0-54e7-11ee-aa11-e58f0eca7592","workbook_id":"5ead48d0-54e6-11ee-aa11-e58f0eca7592","created_at":"2023-09-16T23:11:30.453Z","updated_at":"2023-09-29T15:23:40.685Z","workbookId":"5ead48d0-54e6-11ee-aa11-e58f0eca7592"},{"config":{},"id":"21a2f3d0-54e7-11ee-aa11-e58f0eca7592","name":"Find the Optimal Route","description":"Description for sheet 2","previous_worksheet_id":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","next_worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","workbook_id":"5ead48d0-54e6-11ee-aa11-e58f0eca7592","created_at":"2023-09-16T23:16:57.357Z","updated_at":"2023-10-03T01:26:21.756Z","workbookId":"5ead48d0-54e6-11ee-aa11-e58f0eca7592"},{"config":{},"id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","name":"Real-Time Tracking","description":"Description for sheet 3","previous_worksheet_id":"21a2f3d0-54e7-11ee-aa11-e58f0eca7592","next_worksheet_id":null,"workbook_id":"5ead48d0-54e6-11ee-aa11-e58f0eca7592","created_at":"2023-09-16T23:22:40.604Z","updated_at":"2023-09-29T15:23:38.268Z","workbookId":"5ead48d0-54e6-11ee-aa11-e58f0eca7592"},{"config":{},"id":"262418e0-5edc-11ee-b6ac-53c29e67568d","name":"Introduction","description":"Description for sheet 4","previous_worksheet_id":null,"next_worksheet_id":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","workbook_id":"5ead48d0-54e6-11ee-aa11-e58f0eca7592","created_at":"2023-09-29T15:23:32.078Z","updated_at":"2023-09-29T15:23:53.795Z","workbookId":"5ead48d0-54e6-11ee-aa11-e58f0eca7592"}],"blockMap":{"5ec95c50-54e6-11ee-aa11-e58f0eca7592":[{"config":{},"id":"5ee0dbf0-54e6-11ee-aa11-e58f0eca7592","name":"Block 1","description":"Description for Block 1","content":"\"--Load data\\nDROP TABLE IF EXISTS dc_shape;\\nLOAD DATA INTO dc_shape\\nFROM FILE PATHS 'dc/dc_roads.csv'\\nFORMAT TEXT\\nWITH OPTIONS (\\n    DATA SOURCE = 'msdo_data_source'\\n);\\n\\n--DC_AREA Graph Creation\\nCREATE OR REPLACE DIRECTED GRAPH dc_area \\n    (EDGES => INPUT_TABLE (\\n        SELECT  id AS ID,\\n            wkt AS WKTLINE,\\n            dir AS DIRECTION,\\n            time AS WEIGHT_VALUESPECIFIED\\n        FROM ki_home.dc_shape),\\n        OPTIONS => KV_PAIRS(\\n            'graph_table' = 'ki_home.dc_area_table',\\n            'add_turns' = 'true'\\n        )\\n    );\"","previous_block_id":"386a7960-5692-11ee-aa11-e58f0eca7592","next_block_id":"f54d2f60-569b-11ee-aa11-e58f0eca7592","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","created_at":"2023-09-16T23:11:30.607Z","updated_at":"2023-10-09T23:58:57.005Z","worksheetId":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"fa44fae0-54e6-11ee-aa11-e58f0eca7592","name":"Block","description":"Description for Block","content":"\"-- Credentials for Kafka cluster\\nDROP TABLE IF EXISTS kafka_credential_object;\\nCREATE OR REPLACE CREDENTIAL kafka_credential_object\\nTYPE = 'kafka'\\nWITH OPTIONS (\\n    'security.protocol' = 'SASL_SSL',\\n    'sasl.mechanism' = 'PLAIN',\\n    'sasl.username'='QZN62QB2RBTLW74L',\\n    'sasl.password'='iiJDdKeBzf5ms5EInLvpRslW1zwsTYx9tjZ1pQyVoS+gPGkyNms6eMXPaR6y+GST'\\n);\\n\\n-- The AWS S3 Bucket For Supply and Demand Tables\\nCREATE OR REPLACE DATA SOURCE msdo_data_source\\nLOCATION = 'S3'\\nWITH OPTIONS (\\n    ANONYMOUS = 'true',\\n    BUCKET NAME = 'kinetica-examples-data-public',\\n    REGION = 'us-east-1'\\n);\\n\\n--Creating Data Source to reach the Kafka Server\\nCREATE OR REPLACE DATA SOURCE msdo_truck_locations\\nLOCATION = 'kafka://pkc-ep9mm.us-east-2.aws.confluent.cloud:9092'\\nWITH OPTIONS \\n(\\n    kafka_topic_name =  'msdo_truck_locations',\\n    credential = 'kafka_credential_object'\\n);\"","previous_block_id":"c75897b0-5692-11ee-aa11-e58f0eca7592","next_block_id":"0dbaded0-5c00-11ee-aa11-e58f0eca7592","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","created_at":"2023-09-16T23:15:51.310Z","updated_at":"2023-10-06T05:04:33.798Z","worksheetId":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"386a7960-5692-11ee-aa11-e58f0eca7592","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"CREATE THE MAP\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"The following block of code creates a graph of the road network in an around Washtington DC. To do this, first we need to load spatial data that represents the road network. This spatial data contains WKT lines for different road segments in DC along with the direction of travel and the time it takes to traverse that segment. When we create a graph using this road network data, under the hood Kinetica converts each spatial line representing a road segment into a directed edge with an associated weight. The weight in this case is the time for traversing that segment. \"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Kinetica uses a native representation for storing graph data. However, we can set an additional option in the create graph query that stores a relational representation of a graph object. In the query we have set that to dc_area_table. We can use this table to visualize this graph on a map as shown below.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"For more information on Kinetica's graph API please refer to the playlist: \"},{\"underline\":true,\"text\":\"https://www.youtube.com/watch?v=wUpeZbzbK4Y&list=PLtLChx8K0ZZVkufn1GMvsR3BY2jMP3JXD\"}]}]","previous_block_id":"b661f0d0-66c0-11ee-9f26-31ef1f150e5a","next_block_id":"5ee0dbf0-54e6-11ee-aa11-e58f0eca7592","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","created_at":"2023-09-19T02:14:10.678Z","updated_at":"2023-10-09T16:27:17.886Z","worksheetId":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"c75897b0-5692-11ee-aa11-e58f0eca7592","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"CREATE THE DATA SOURCES\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"We will be using three different data sources for this example: one Kafka topic and two small files loaded from AWS S3. Our first task is to register all of these data sources so that we can connect to them.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"\\\"msdo_data_source\\\" data source will retrieve data for depot and customer information, and \\\"msdo_truck_locations\\\" data source will retrieve data for real-time truck information from the Kafka server.\"}]}]","previous_block_id":null,"next_block_id":"fa44fae0-54e6-11ee-aa11-e58f0eca7592","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","created_at":"2023-09-19T02:18:10.475Z","updated_at":"2023-09-26T22:55:56.696Z","worksheetId":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"44fcf3f0-5698-11ee-aa11-e58f0eca7592","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"CREATE SUPPLY AND DEMAND TABLES\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"The following block of code creates and populates customer and depot tables. \"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"For the customer table the \\\"id\\\" is a unique identifier for each customer, \\\"location\\\" stores geographic information for each customer, \\\"num_of_pkg\\\" represents the number of packages each customer has requested, \\\"vol_of_pkg\\\" indicates the volume of packages each customer expects, \\\"time_penalty\\\" represents the additional time in seconds that a driver may take to deliver packages to this customer, and \\\"region_id\\\" is used to identify the region associated with each customer.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"For the truck table \\\"truck_id\\\" serves as a unique identifier for each truck, \\\"region_id\\\" is used to identify the region where the truck operates, \\\"location\\\" stores geographic information for each truck's current position, \\\"cap_of_pkg\\\" signifies the maximum number of packages that a truck can carry, \\\"cap_of_vol\\\" indicates the maximum volume of packages that a truck can accommodate, and \\\"station_name\\\" specifies the depot which each truck belongs.\"}]}]","previous_block_id":"f54d2f60-569b-11ee-aa11-e58f0eca7592","next_block_id":"0b2c1720-5ff1-11ee-b6ac-53c29e67568d","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","created_at":"2023-09-19T02:57:28.752Z","updated_at":"2023-10-03T19:30:15.465Z","worksheetId":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"f54d2f60-569b-11ee-aa11-e58f0eca7592","name":"Block","description":"Description for Block","content":"[{\"table_schema\":\"ki_home\",\"table_name\":\"dc_area_table\",\"geometry_type\":\"wkt\",\"wkt\":\"EDGE_WKTLINE\",\"renderType\":\"raster\",\"fillColor\":\"ca2c92\",\"borderColor\":\"3700b3\",\"pointSize\":2,\"lineWidth\":1,\"center_longitude\":-77.1385,\"center_latitude\":39.0084,\"zoom_level\":9.97,\"opacity\":70,\"title\":\"Road Network Graph (Washington DC Area)\",\"block_height\":535,\"auto_refresh_interval\":\"\",\"basemap_style\":\"grayscale\",\"overrides\":\"\"}]","previous_block_id":"5ee0dbf0-54e6-11ee-aa11-e58f0eca7592","next_block_id":"44fcf3f0-5698-11ee-aa11-e58f0eca7592","block_type_id":"e8ccc4e2-793f-47ed-9af2-f0a58a840006","worksheet_id":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","created_at":"2023-09-19T03:23:53.046Z","updated_at":"2023-09-29T15:22:27.950Z","worksheetId":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","blockTypeId":"e8ccc4e2-793f-47ed-9af2-f0a58a840006"},{"config":{},"id":"0dbaded0-5c00-11ee-aa11-e58f0eca7592","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"bold\":true,\"text\":\"CREATE & LOAD DATA\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"In the next step, we will create a new table called 'msdo_trucks' and load it with data retrieved from the Kafka server. \"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"The subscription to the Kafka server will be canceled after 2 hours. \"}]}]","previous_block_id":"fa44fae0-54e6-11ee-aa11-e58f0eca7592","next_block_id":"0f6fe1d0-5c00-11ee-aa11-e58f0eca7592","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","created_at":"2023-09-26T00:02:59.517Z","updated_at":"2023-10-09T23:26:38.641Z","worksheetId":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"0f6fe1d0-5c00-11ee-aa11-e58f0eca7592","name":"Block","description":"Description for Block","content":"\"--Creating a new table for the data from Kafka Server\\nCREATE OR REPLACE TABLE msdo_trucks (\\n    \\\"DEMAND_DROP\\\" DOUBLE NOT NULL,\\n    \\\"DEMAND_ID\\\" INTEGER NOT NULL,\\n    \\\"REGIONID\\\" INTEGER NOT NULL,\\n    \\\"START_TIME\\\" BIGINT NOT NULL,\\n    \\\"STATUS\\\" VARCHAR (128, dict) NOT NULL,\\n    \\\"SUPPLY_ID\\\" INTEGER NOT NULL,\\n    \\\"TIMESTAMP\\\" TIMESTAMP NOT NULL,\\n    \\\"TRACKID\\\" VARCHAR (64, dict) NOT NULL,\\n    \\\"X\\\" DOUBLE NOT NULL,\\n    \\\"Y\\\" DOUBLE NOT NULL\\n);\"","previous_block_id":"0dbaded0-5c00-11ee-aa11-e58f0eca7592","next_block_id":"b661f0d0-66c0-11ee-9f26-31ef1f150e5a","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","created_at":"2023-09-26T00:03:02.381Z","updated_at":"2023-10-09T23:57:28.465Z","worksheetId":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"ac532180-5c12-11ee-aa11-e58f0eca7592","name":"Block","description":"Description for Block","content":"[{\"table_schema\":\"ki_home\",\"table_name\":\"truck\",\"geometry_type\":\"wkt\",\"wkt\":\"location\",\"renderType\":\"raster\",\"fillColor\":\"1e08e2ff\",\"borderColor\":\"3700b3\",\"pointSize\":5,\"lineWidth\":2,\"center_longitude\":-77.1164,\"center_latitude\":38.9739,\"zoom_level\":9.964293872077397,\"opacity\":70,\"title\":\"Customer Locations: 🔴       Depot Locations: 🔵\",\"block_height\":535,\"auto_refresh_interval\":\"\",\"basemap_style\":\"grayscale\",\"overrides\":\"\"},{\"table_schema\":\"ki_home\",\"table_name\":\"customer\",\"geometry_type\":\"wkt\",\"wkt\":\"location\",\"renderType\":\"raster\",\"fillColor\":\"e20b0bff\",\"borderColor\":\"3700b3\",\"pointSize\":5,\"lineWidth\":2,\"opacity\":70,\"auto_refresh_interval\":\"\",\"overrides\":\"\"}]","previous_block_id":"5aff13c0-5ff0-11ee-b6ac-53c29e67568d","next_block_id":null,"block_type_id":"e8ccc4e2-793f-47ed-9af2-f0a58a840006","worksheet_id":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","created_at":"2023-09-26T02:16:16.537Z","updated_at":"2023-10-09T23:49:21.312Z","worksheetId":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","blockTypeId":"e8ccc4e2-793f-47ed-9af2-f0a58a840006"},{"config":{},"id":"5aff13c0-5ff0-11ee-b6ac-53c29e67568d","name":"Block","description":"Description for Block","content":"\"--Load data\\nLOAD DATA INTO customer\\nFROM FILE PATHS 'dc/customers_with_regions.csv'\\nFORMAT TEXT\\nWITH OPTIONS (\\n    DATA SOURCE = 'msdo_data_source'\\n);\\n\\n--Load data\\nLOAD DATA INTO truck\\nFROM FILE PATHS 'dc/trucks_with_regions.csv'\\nFORMAT TEXT\\nWITH OPTIONS (\\n    DATA SOURCE = 'msdo_data_source'\\n);\"","previous_block_id":"0b2c1720-5ff1-11ee-b6ac-53c29e67568d","next_block_id":"ac532180-5c12-11ee-aa11-e58f0eca7592","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","created_at":"2023-10-01T00:20:41.852Z","updated_at":"2023-10-09T23:49:21.310Z","worksheetId":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"0b2c1720-5ff1-11ee-b6ac-53c29e67568d","name":"Block","description":"Description for Block","content":"\"--Creating Customer(Demand) Table:\\nCREATE OR REPLACE TABLE customer(\\n    ID int,\\n    location wkt not null,   \\n    NumOfPkg int not null,\\n    VolOfPkg float not null,\\n    TimePenalty float,\\n    RegionID int\\n);\\n\\n--Creating Truck(Supply) Table:\\nCREATE OR REPLACE TABLE truck(\\n    TruckID int,\\n    RegionID int,\\n    location wkt not null,\\n    CapOfPkg int not null,\\n    CapOfVol float not null,\\n    StationName String(32)\\n);\"","previous_block_id":"44fcf3f0-5698-11ee-aa11-e58f0eca7592","next_block_id":"5aff13c0-5ff0-11ee-b6ac-53c29e67568d","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","created_at":"2023-10-01T00:25:37.426Z","updated_at":"2023-10-09T23:49:06.864Z","worksheetId":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"b661f0d0-66c0-11ee-9f26-31ef1f150e5a","name":"Block","description":"Description for Block","content":"\"--Loading the data in Kafka Server into msdo-trucks\\nLOAD DATA INTO msdo_trucks\\nFROM FILE PATH ''\\nFORMAT JSON\\nWITH OPTIONS (\\n    DATA SOURCE = 'msdo_truck_locations',\\n    SUBSCRIBE = TRUE,\\n    ERROR_HANDLING = 'permissive',\\n    kafka_offset_reset_policy = 'latest', -- start the ingest from the latest messages\\n    kafka_subscription_cancel_after = 120 -- cancels the stream after 120 minutes\\n);\"","previous_block_id":"0f6fe1d0-5c00-11ee-aa11-e58f0eca7592","next_block_id":"386a7960-5692-11ee-aa11-e58f0eca7592","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","created_at":"2023-10-09T16:27:17.469Z","updated_at":"2023-10-09T16:27:34.533Z","worksheetId":"5ec95c50-54e6-11ee-aa11-e58f0eca7592","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"}],"21a2f3d0-54e7-11ee-aa11-e58f0eca7592":[{"config":{},"id":"21c2b0d0-54e7-11ee-aa11-e58f0eca7592","name":"Block 1","description":"Description for Block 1","content":"\"--MSDO Solver\\nDROP TABLE IF EXISTS optimal_route;\\nexecute function match_graph(\\n    graph => 'dc_area',\\n    sample_points => input_tables\\n    (\\n        (\\n            SELECT \\n                id AS demand_id,\\n                location AS demand_wktpoint,\\n                regionid AS demand_region_id,\\n                numOfPkg AS demand_size,\\n                volOfPkg AS demand_size2,\\n                timepenalty AS demand_penalty\\n            FROM ki_home.customer\\n        ),\\n        (\\n            SELECT \\n                regionid AS supply_region_id,\\n                location AS supply_wktpoint,\\n                truckid AS supply_id,\\n                capOfPkg AS supply_size,\\n                capOfVol AS supply_size2\\n            FROM ki_home.truck\\n        )\\n    ),\\n    solve_method => 'match_supply_demand',\\n    solution_table => 'optimal_route',\\n    options => kv_pairs\\n    (\\n        output_tracks = 'true',\\n        svg_width = '1200', svg_height = '900',  \\n        svg_speed = '80', svg_basemap = 'true',\\n        left_turn_penalty = '25',\\n        right_turn_penalty = '15',\\n        intersection_penalty = '45',\\n        sharp_turn_penalty = '30',\\n        max_stops = '5',\\n        partial_loading = 'false',\\n        unit_unloading_cost = '60'\\n    )\\n);\"","previous_block_id":"43adab30-63cb-11ee-b6ac-53c29e67568d","next_block_id":"640be7e0-5cb2-11ee-b6ac-53c29e67568d","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"21a2f3d0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-09-16T23:16:57.565Z","updated_at":"2023-10-09T23:50:32.830Z","worksheetId":"21a2f3d0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"93fa1470-570f-11ee-aa11-e58f0eca7592","name":"Block","description":"Description for Block","content":"[{\"table_schema\":\"ki_home\",\"table_name\":\"optimal_route\",\"geometry_type\":\"lon_lat\",\"longitude\":\"x\",\"latitude\":\"y\",\"renderType\":\"track\",\"trackHeadColor\":\"000000ff\",\"trackHeadShape\":\"diamond\",\"trackHeadSize\":8,\"trackMarkerColor\":\"ca2c92\",\"trackMarkerShape\":\"none\",\"trackMarkerSize\":2,\"trackLineColor\":\"b30000ff\",\"trackLineWidth\":3,\"symbolRotation\":\"\",\"center_longitude\":-77.1287,\"center_latitude\":39.0078,\"zoom_level\":9.99,\"opacity\":70,\"title\":\"MSDO Example Result\",\"block_height\":535,\"auto_refresh_interval\":\"\",\"basemap_style\":\"grayscale\",\"overrides\":\"\"}]","previous_block_id":"640be7e0-5cb2-11ee-b6ac-53c29e67568d","next_block_id":null,"block_type_id":"e8ccc4e2-793f-47ed-9af2-f0a58a840006","worksheet_id":"21a2f3d0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-09-19T17:11:31.383Z","updated_at":"2023-10-08T01:05:49.240Z","worksheetId":"21a2f3d0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"e8ccc4e2-793f-47ed-9af2-f0a58a840006"},{"config":{},"id":"640be7e0-5cb2-11ee-b6ac-53c29e67568d","name":"Block","description":"Description for Block","content":"\"--Alter an attribute type in \\\"optimal_route\\\" table\\nALTER TABLE optimal_route\\nALTER COLUMN demand_id varchar(4);\"","previous_block_id":"21c2b0d0-54e7-11ee-aa11-e58f0eca7592","next_block_id":"93fa1470-570f-11ee-aa11-e58f0eca7592","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"21a2f3d0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-09-26T21:19:34.751Z","updated_at":"2023-10-09T23:50:32.832Z","worksheetId":"21a2f3d0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"43adab30-63cb-11ee-b6ac-53c29e67568d","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"HOW MSDO SOLVER WORKS?\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"To successfully run the MSDO solver, we begin by selecting a specific graph, in this case, the \\\"dc_area\\\" graph from the previous sheet. Within this optimization process, we specify two crucial data sources: the supply and demand tables, which in this instance are the \\\"truck\\\" and \\\"customer\\\" tables. Both tables must contain specific attributes such as id, region id, location, and size attribute(s). The \\\"demand_penalty\\\" attribute is optional for the demand side.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"For the \\\"solve_method\\\" section, we opt for \\\"match_supply_demand,\\\" indicating that our solver will find the most optimized route in the MSDO concept. The \\\"solution_table\\\" is defined as the new table created and populated by the solver.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Finally, in the last part, we define our options, enabling us to filter variables or establish rules. Kinetica provides a variety of additional options that can be seamlessly integrated with the MSDO solver. For more options: \"},{\"text\":\"https://docs.kinetica.com/7.1/feature_overview/match_graph_feature_overview/\",\"underline\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Left Turn Penalty:\",\"bold\":true},{\"text\":\" Assigns a time penalty for each left turn made by the trucks.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Right Turn Penalty: \",\"bold\":true},{\"text\":\"Assigns a time penalty for each right turn made by the trucks.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Intersection Penalty: \",\"bold\":true},{\"text\":\"Assigns a time penalty for each truck that traverses intersections.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Sharp Turn Penalty: \",\"bold\":true},{\"text\":\"Assigns a time penalty for each sharp turn made by the trucks.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Max Stops:\",\"bold\":true},{\"text\":\" Sets a limit on the number of stops a supplier can make in a single round trip.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Partial Loading: \",\"bold\":true},{\"text\":\"Provides flexibility by allowing suppliers to off-load at the demand side, even if the remaining supply is insufficient to fulfill the store's requirements. \"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Unit Unloading Cost:\",\"bold\":true},{\"text\":\" Sets a cost of each unit load in the total trip cost. It becomes effective when the unit cost per load exceeds zero.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Once the solver is run, an \\\"Animate\\\" button will appear at the end of the block. This feature is provided using SVG. To enable this option, set the \\\"output_trucks\\\" parameter to \\\"true.\\\"\"}]}]","previous_block_id":null,"next_block_id":"21c2b0d0-54e7-11ee-aa11-e58f0eca7592","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"21a2f3d0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-10-05T22:05:16.003Z","updated_at":"2023-10-05T22:32:57.147Z","worksheetId":"21a2f3d0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"}],"ee3a49c0-54e7-11ee-aa11-e58f0eca7592":[{"config":{},"id":"31beae70-54e8-11ee-aa11-e58f0eca7592","name":"Block","description":"Description for Block","content":"[{\"table_schema\":\"ki_home\",\"table_name\":\"msdo_trucks\",\"geometry_type\":\"lon_lat\",\"longitude\":\"X\",\"latitude\":\"Y\",\"renderType\":\"track\",\"trackHeadColor\":\"0e0109ff\",\"trackHeadShape\":\"diamond\",\"trackHeadSize\":8,\"trackMarkerColor\":\"ca2c92\",\"trackMarkerShape\":\"none\",\"trackMarkerSize\":2,\"trackLineColor\":\"b30003ff\",\"trackLineWidth\":2,\"symbolRotation\":\"\",\"center_longitude\":-77.0941,\"center_latitude\":39.0185,\"zoom_level\":10.063033144690571,\"opacity\":70,\"title\":\"Current Truck Locations\",\"block_height\":535,\"auto_refresh_interval\":5,\"basemap_style\":\"grayscale\",\"overrides\":\"\"}]","previous_block_id":"da0d7080-5753-11ee-aa11-e58f0eca7592","next_block_id":"a261faf0-63fd-11ee-b6ac-53c29e67568d","block_type_id":"e8ccc4e2-793f-47ed-9af2-f0a58a840006","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-09-16T23:24:33.879Z","updated_at":"2023-10-09T23:52:44.715Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"e8ccc4e2-793f-47ed-9af2-f0a58a840006"},{"config":{},"id":"36480720-54e8-11ee-aa11-e58f0eca7592","name":"Block","description":"Description for Block","content":"\"-- When did each route start in Kafka Server?\\nCREATE OR REPLACE MATERIALIZED VIEW start_times \\nREFRESH EVERY 5 MINUTE AS\\nSELECT TRACKID, MAX(start_time) AS start_time\\nFROM msdo_trucks\\nGROUP BY trackid;\"","previous_block_id":"bff76000-63fd-11ee-b6ac-53c29e67568d","next_block_id":"01a21b50-6401-11ee-b6ac-53c29e67568d","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-09-16T23:24:41.490Z","updated_at":"2023-10-10T00:24:49.956Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{"isBlockCollapsed":false},"id":"5552ce20-54e8-11ee-aa11-e58f0eca7592","name":"Block","description":"Description for Block","content":"\"--Combining Customer and Truck Tables\\nCREATE OR REPLACE TABLE destinations AS --next_stop\\n(SELECT DISTINCT CONCAT(REGIONID, TruckID) AS destination_id, 'depot' AS destination_label, location as location FROM ki_home.truck)\\nUNION\\n(SELECT DISTINCT ID AS destination_id,'customer' AS destination_label, location as location  FROM ki_home.customer);\\n\"","previous_block_id":"94958a10-6455-11ee-9f26-31ef1f150e5a","next_block_id":"fadc16c0-6579-11ee-9f26-31ef1f150e5a","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-09-16T23:25:33.571Z","updated_at":"2023-10-10T00:27:10.785Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"5cfb4120-54e8-11ee-aa11-e58f0eca7592","name":"Block","description":"Description for Block","content":"\"CREATE OR REPLACE MATERIALIZED VIEW route_compare\\nREFRESH EVERY 5 SECOND AS\\nSELECT *,\\n    act.dist_to_next_stop - s.dist_to_next_stop AS distance_gap,\\n    IF(act.dist_to_next_stop > s.dist_to_next_stop, 'Lagging', 'Leading') AS speed_indicator\\nFROM \\n(\\n    SELECT * FROM \\n    actual_distances \\n    WHERE TIMESTAMP > NOW() - INTERVAL '10' MINUTE -- only keep the last 10 minutes of data\\n) AS act\\nINNER JOIN solver_distances s \\nON act.TRACKID = s.TRACKID AND ASOF(act.TIMESTAMP, s.TIMESTAMP, INTERVAL '-10' SECOND, INTERVAL '1' MINUTE, MIN) AND act.destination_id = s.destination_id;\"","previous_block_id":"d6598170-66c3-11ee-9f26-31ef1f150e5a","next_block_id":"849c0ad0-5cbc-11ee-b6ac-53c29e67568d","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-09-16T23:25:46.418Z","updated_at":"2023-10-09T16:49:40.000Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"7ee61da0-54e8-11ee-aa11-e58f0eca7592","name":"Block","description":"Description for Block","content":"\"--An example query for alert creation\\nCREATE STREAM alert_trucks \\nON TABLE route_compare\\nWHERE distance_gap > 2000\\nWITH OPTIONS \\n(\\n    DESTINATION = 'https://webhook.site/17ee7a7e-c7fd-4c29-87fc-7a0b58091c8f'\\n)\"","previous_block_id":"67592530-66c5-11ee-9f26-31ef1f150e5a","next_block_id":null,"block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-09-16T23:26:43.322Z","updated_at":"2023-10-09T17:00:52.806Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"da0d7080-5753-11ee-aa11-e58f0eca7592","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"bold\":true,\"text\":\"REAL-TIME GPS COORDINATES OF SUPPLY TRUCKS\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Within the data sheet, we have established an ingestion pipeline for a Kafka stream, which delivers real-time GPS coordinates for supply trucks. The map displayed below illustrates the current positions of each truck in real-time. These trucks are adhering to the same route as the optimal path presented. These trucks are following the same route as the optimal path depicted, but each one experiences random delays to simulate a more realistic environment. Consequently, the real-time GPS coordinates may have more delays compared to the trucks following the optimal route.\"}]}]","previous_block_id":null,"next_block_id":"31beae70-54e8-11ee-aa11-e58f0eca7592","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-09-20T01:20:14.729Z","updated_at":"2023-10-06T04:09:47.388Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"849c0ad0-5cbc-11ee-b6ac-53c29e67568d","name":"Block","description":"Description for Block","content":"[{\"table_schema\":\"ki_home\",\"table_name\":\"route_compare\",\"geometry_type\":\"lon_lat\",\"longitude\":\"X\",\"latitude\":\"Y\",\"renderType\":\"track\",\"trackHeadColor\":\"057906ff\",\"trackHeadShape\":\"circle\",\"trackHeadSize\":5,\"trackMarkerColor\":\"ca2c92\",\"trackMarkerShape\":\"none\",\"trackMarkerSize\":2,\"trackLineColor\":\"b30000ff\",\"trackLineWidth\":1,\"symbolRotation\":\"\",\"center_longitude\":-77.1051,\"center_latitude\":39.0139,\"zoom_level\":10.28,\"opacity\":70,\"title\":\"Real-Time Fleet Tracking Comparison\",\"block_height\":535,\"auto_refresh_interval\":5,\"basemap_style\":\"grayscale\",\"overrides\":\"\"},{\"table_schema\":\"ki_home\",\"table_name\":\"route_compare\",\"geometry_type\":\"lon_lat\",\"longitude\":\"X0\",\"latitude\":\"Y0\",\"renderType\":\"track\",\"trackHeadColor\":\"0c11ccff\",\"trackHeadShape\":\"circle\",\"trackHeadSize\":5,\"trackMarkerColor\":\"ca2c92\",\"trackMarkerShape\":\"none\",\"trackMarkerSize\":2,\"trackLineColor\":\"b30000ff\",\"trackLineWidth\":1,\"symbolRotation\":\"\",\"opacity\":70,\"auto_refresh_interval\":\"\",\"overrides\":\"\"}]","previous_block_id":"5cfb4120-54e8-11ee-aa11-e58f0eca7592","next_block_id":"67592530-66c5-11ee-9f26-31ef1f150e5a","block_type_id":"e8ccc4e2-793f-47ed-9af2-f0a58a840006","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-09-26T22:32:04.349Z","updated_at":"2023-10-09T17:08:45.158Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"e8ccc4e2-793f-47ed-9af2-f0a58a840006"},{"config":{},"id":"e9aa7e70-63fb-11ee-b6ac-53c29e67568d","name":"Block","description":"Description for Block","content":"\"--Output of the \\\"optimal_route\\\"\\nSELECT * FROM optimal_route;\"","previous_block_id":"a261faf0-63fd-11ee-b6ac-53c29e67568d","next_block_id":"bff76000-63fd-11ee-b6ac-53c29e67568d","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-10-06T03:53:30.327Z","updated_at":"2023-10-10T00:00:00.927Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"a261faf0-63fd-11ee-b6ac-53c29e67568d","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"OUTPUT OF THE OPTIMAL ROUTE SOLVER\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Before we delve into our analysis, it's important to familiarize ourselves with the solver's output. The output consists of eight distinct columns, each serving a specific purpose.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"- The \\\"x\\\" and \\\"y\\\" columns provide coordinates for the trucks' positions.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"- The \\\"timestamp\\\" columnindicates the time elapsed in seconds(delta) since a truck commenced its route.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"- \\\"trackid\\\" is a unique identifier generated from the combination of \\\"region_id\\\" and \\\"supply_id.\\\"\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"- \\\"region_id\\\" identifies the region to which each truck is assigned. In this scenario, there are three distinct regions.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"- \\\"supply_id\\\" is a unique identifier assigned to each truck.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"- \\\"demand_id\\\" reveals the unique identifier of the next destination for each truck.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"- \\\"demand_drop\\\" signifies the quantity of packages (demand_size) that will be delivered at the next destination.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"With this understanding in place, let's proceed to examine the solver's output in more detail by executing the query below.\"}]}]","previous_block_id":"31beae70-54e8-11ee-aa11-e58f0eca7592","next_block_id":"e9aa7e70-63fb-11ee-b6ac-53c29e67568d","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-10-06T04:05:49.727Z","updated_at":"2023-10-09T23:52:44.717Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"bff76000-63fd-11ee-b6ac-53c29e67568d","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"FORMAT KAFKA SERVER DATA\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"We can compare the data generated by the MSDO solver with the data obtained from the Kafka server. However, it's important to note that the Kafka server operates continuously, causing the trucks' routes to reset once they complete. Consequently, the Kafka server may produce duplicate coordinate signals with varying timestamp values, which can adversely impact our analysis. To mitigate the issue of duplicate records, we can opt to select records that share the same start time. Each time the trucks commence their routes, their routes are marked with their respective starting timestamps, so we identify and select the records belongs the same route. \"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"The following query will establish a materialized view designed to retain information corresponding to truck routes from the Kafka server, specifically focusing on entries that share a same starting time.\"}]}]","previous_block_id":"e9aa7e70-63fb-11ee-b6ac-53c29e67568d","next_block_id":"36480720-54e8-11ee-aa11-e58f0eca7592","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-10-06T04:06:39.360Z","updated_at":"2023-10-10T00:01:58.055Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"01a21b50-6401-11ee-b6ac-53c29e67568d","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"CONVERTING DELTA VALUES\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"In the following code block, we are creating a materialized view that modifies the data in the 'optimal_route' table. Specifically, we are converting the delta values in the 'optimal_route' table from seconds to milliseconds. Once these conversions are made, we aim to incorporate the 'start_times' values into each delta, allowing for meaningful comparisons between the deltas of actual trucks and solver trucks. \"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"To achieve this, we utilize an inner join between the 'optimal_route' table and the 'start_times' table, ensuring that each route's 'start_time' value corresponds appropriately with the data in the 'optimal_route' table.\"}]}]","previous_block_id":"36480720-54e8-11ee-aa11-e58f0eca7592","next_block_id":"044c7ad0-6401-11ee-b6ac-53c29e67568d","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-10-06T04:29:58.021Z","updated_at":"2023-10-10T00:52:07.785Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"044c7ad0-6401-11ee-b6ac-53c29e67568d","name":"Block","description":"Description for Block","content":"\"-- Create a new solver table with relative timestamps based on each trucks start time\\nCREATE OR REPLACE MATERIALIZED VIEW solver_route\\nREFRESH ON CHANGE AS\\nSELECT \\n    s.trackid,\\n    s.x,\\n    s.y,\\n    s.region_id, \\n    s.supply_id, \\n    INT(s.demand_id) AS demand_id,\\n    TIMESTAMP(LONG(ROUND(s.TIMESTAMP * 1000) + start_time)) AS TIMESTAMP\\nFROM optimal_route AS s\\nJOIN start_times AS st\\nON s.trackid = st.trackid;\"","previous_block_id":"01a21b50-6401-11ee-b6ac-53c29e67568d","next_block_id":"94958a10-6455-11ee-9f26-31ef1f150e5a","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-10-06T04:30:02.494Z","updated_at":"2023-10-09T16:24:52.204Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"94958a10-6455-11ee-9f26-31ef1f150e5a","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"COMBINING SUPPLY AND DEMAND TABLES\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"In the upcoming section, we will merge the customer and truck tables. The primary objective behind this merging process is to consolidate all relevant information into a single table. By doing so, we ensure that, for each truck destination, we have comprehensive access to detailed information about both customers and trucks within a unified dataset. We will utilize the newly created \\\"next_stop\\\" table in subsequent analyses, enabling us to construct join statements that provide more in-depth insights into truck logistics.\"}]}]","previous_block_id":"044c7ad0-6401-11ee-b6ac-53c29e67568d","next_block_id":"5552ce20-54e8-11ee-aa11-e58f0eca7592","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-10-06T14:35:22.289Z","updated_at":"2023-10-08T01:12:46.893Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"fadc16c0-6579-11ee-9f26-31ef1f150e5a","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"FURTHER ANALYSIS\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"In our further analysis, we have the capability to compare the solver's route with real-time truck signals. The solver's route serves as a representation of the expected schedule for the trucks, enabling us to contrast it with the real-time truck signals received from the Kafka server. One valuable aspect of this analysis involves calculating the distance to the next destination for GPS points along a route. This calculation allows us to make comparisons between a truck's current speed and that of the optimal route, thereby determining whether the truck is moving faster or slower than expected.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"The following query will create a new materialized view to display the distance to the next destination stop for the solver's route using the \\\"solver_route\\\" table. Following the creation of this new materialized view, we will proceed to display the distances to the next stop for truck 305.\"}]}]","previous_block_id":"5552ce20-54e8-11ee-aa11-e58f0eca7592","next_block_id":"6e4ba210-657a-11ee-9f26-31ef1f150e5a","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-10-08T01:28:26.925Z","updated_at":"2023-10-10T00:27:10.786Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"6e4ba210-657a-11ee-9f26-31ef1f150e5a","name":"Block","description":"Description for Block","content":"\"--CALCULATE DISTANCES TO NEXT DESTINATION AT EACH POINT ON THE OPTIMAL ROUTE\\nCREATE OR REPLACE MATERIALIZED VIEW solver_distances\\nREFRESH ON CHANGE AS\\nSELECT\\n    s.TIMESTAMP, \\n    s.TRACKID,\\n    s.X,\\n    s.Y,\\n    d.destination_id,\\n    d.destination_label AS solver_destination,\\n    STXY_DISTANCE(s.x, s.y, d.location, 1) AS dist_to_next_stop\\nFROM\\n(\\n    SELECT \\n        *,\\n        IF(demand_id > 30, CONCAT(region_id, supply_id), demand_id) AS destination_id\\n    FROM solver_route\\n)  AS s\\nJOIN destinations AS d\\nON s.destination_id = d.destination_id;\\n\\n--Distance to next destination for solver trucks\\nSELECT DATETIME(timestamp) AS timestamp, dist_to_next_stop FROM solver_distances \\nWHERE trackid = '1003_305';\"","previous_block_id":"fadc16c0-6579-11ee-9f26-31ef1f150e5a","next_block_id":"798c7e10-657a-11ee-9f26-31ef1f150e5a","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-10-08T01:31:40.593Z","updated_at":"2023-10-08T01:37:03.034Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"798c7e10-657a-11ee-9f26-31ef1f150e5a","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"The following query will display the distance to the next destination stop for the real-time truck signaks using the \\\"msdo_trucks\\\" table. Following the creation of this new materialized view, we will proceed to display the distances to the next stop for truck 305.\"}]}]","previous_block_id":"6e4ba210-657a-11ee-9f26-31ef1f150e5a","next_block_id":"7b577a10-657a-11ee-9f26-31ef1f150e5a","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-10-08T01:31:59.473Z","updated_at":"2023-10-08T02:25:16.348Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"7b577a10-657a-11ee-9f26-31ef1f150e5a","name":"Block","description":"Description for Block","content":"\"--CALCULATE THE ACTUAL DISTANCES TO NEXT DESTINATION FOR THE REAL TIME ROUTES\\nCREATE OR REPLACE MATERIALIZED VIEW actual_distances\\nREFRESH EVERY 5 SECONDS AS\\nSELECT\\n    k.TIMESTAMP, \\n    k.TRACKID,\\n    k.X,\\n    k.Y,\\n    k.status,\\n    d.destination_id,\\n    d.destination_label AS actual_destination,\\n    STXY_DISTANCE(k.X, k.Y, d.location, 1) AS dist_to_next_stop\\nFROM\\n(\\n    SELECT \\n        *, \\n        IF(demand_id > 30, CONCAT(regionid, supply_id), demand_id) AS destination_id\\n    FROM msdo_trucks\\n) AS k \\nJOIN destinations AS d\\nON k.destination_id = d.destination_id;\\n\\n--Distance to next destination for actual trucks\\nSELECT DATETIME(timestamp) AS timestamp, dist_to_next_stop FROM actual_distances \\nWHERE trackid = '1003_305';\"","previous_block_id":"798c7e10-657a-11ee-9f26-31ef1f150e5a","next_block_id":"d6598170-66c3-11ee-9f26-31ef1f150e5a","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-10-08T01:32:02.481Z","updated_at":"2023-10-10T00:51:01.648Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"d6598170-66c3-11ee-9f26-31ef1f150e5a","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"COMPARING TRUCK LOCATIONS\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"In addition to comparing distances to the next stop for each truck, we are also analyzing the real-time locations of the trucks. We can compare the solver's predefined route, which adheres to the expected schedule, with the actual trucks that may be operating on a delayed route. This comparison allows us to assess whether the actual trucks are moving at a faster pace than the optimal route or to observe any delays in their progress.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"In the code block below, we filter and retain only the data from the Kafka server for the past 10 minutes. This data is then used to compare the real-time GPS signals of the trucks with their expected locations based on the results from the optimal route table. It's important to note that since we are only keeping the last 10 minutes, some trucks may not appear on the map below. This occurs because certain trucks have longer routes than others, and the Kafka server resets itself to simulate new routes when the longest route is completed.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"The green truck signals indicate real-time GPS locations, while the blue truck signals represent the positions of solver trucks.\"}]}]","previous_block_id":"7b577a10-657a-11ee-9f26-31ef1f150e5a","next_block_id":"5cfb4120-54e8-11ee-aa11-e58f0eca7592","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-10-09T16:49:39.591Z","updated_at":"2023-10-10T00:51:01.651Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"67592530-66c5-11ee-9f26-31ef1f150e5a","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"🚨 Alerts\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Alerts can be generated under various circumstances, including when a truck is approaching its next location.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"In this particular scenario, we will trigger alerts when the time gap between the actual truck position and the optimal route prediction exceeds 2000 seconds. \"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"These alerts can easily be directed to various tools, such as Slack, for effective monitoring and notification.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"While, for the purposes of this demo, the alerts are not currently routed to any specific tools, they can be accessed through the destination link provided below. \"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"❗️\"},{\"text\":\"Note: \",\"bold\":true},{\"text\":\"The link might be expired, and if so, there will be an error message saying '404 Token not found.' Please click the 'Back to Webhook.site' button, and you will be able to see the alerts on the page. Also, you can update the destination link by copying and pasting the URL on the website.\"}]}]","previous_block_id":"849c0ad0-5cbc-11ee-b6ac-53c29e67568d","next_block_id":"7ee61da0-54e8-11ee-aa11-e58f0eca7592","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","created_at":"2023-10-09T17:00:52.355Z","updated_at":"2023-10-09T17:08:45.160Z","worksheetId":"ee3a49c0-54e7-11ee-aa11-e58f0eca7592","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"}],"262418e0-5edc-11ee-b6ac-53c29e67568d":[{"config":{},"id":"5d0dbad0-66c7-11ee-9f26-31ef1f150e5a","name":"Block","description":"Description for Block","content":"{}","previous_block_id":null,"next_block_id":null,"block_type_id":"d7d34b22-2aa2-484f-9e8e-106f62612caf","worksheet_id":"262418e0-5edc-11ee-b6ac-53c29e67568d","created_at":"2023-10-09T17:14:54.078Z","updated_at":"2023-10-09T23:26:12.276Z","worksheetId":"262418e0-5edc-11ee-b6ac-53c29e67568d","blockTypeId":"d7d34b22-2aa2-484f-9e8e-106f62612caf"}]},"vizMap":{"5ee0dbf0-54e6-11ee-aa11-e58f0eca7592":[],"fa44fae0-54e6-11ee-aa11-e58f0eca7592":[],"386a7960-5692-11ee-aa11-e58f0eca7592":[],"c75897b0-5692-11ee-aa11-e58f0eca7592":[],"44fcf3f0-5698-11ee-aa11-e58f0eca7592":[],"f54d2f60-569b-11ee-aa11-e58f0eca7592":[],"0dbaded0-5c00-11ee-aa11-e58f0eca7592":[],"0f6fe1d0-5c00-11ee-aa11-e58f0eca7592":[],"ac532180-5c12-11ee-aa11-e58f0eca7592":[],"5aff13c0-5ff0-11ee-b6ac-53c29e67568d":[],"0b2c1720-5ff1-11ee-b6ac-53c29e67568d":[],"b661f0d0-66c0-11ee-9f26-31ef1f150e5a":[],"21c2b0d0-54e7-11ee-aa11-e58f0eca7592":[],"93fa1470-570f-11ee-aa11-e58f0eca7592":[],"640be7e0-5cb2-11ee-b6ac-53c29e67568d":[],"43adab30-63cb-11ee-b6ac-53c29e67568d":[],"31beae70-54e8-11ee-aa11-e58f0eca7592":[],"36480720-54e8-11ee-aa11-e58f0eca7592":[],"5552ce20-54e8-11ee-aa11-e58f0eca7592":[],"5cfb4120-54e8-11ee-aa11-e58f0eca7592":[],"7ee61da0-54e8-11ee-aa11-e58f0eca7592":[],"da0d7080-5753-11ee-aa11-e58f0eca7592":[],"849c0ad0-5cbc-11ee-b6ac-53c29e67568d":[],"e9aa7e70-63fb-11ee-b6ac-53c29e67568d":[],"a261faf0-63fd-11ee-b6ac-53c29e67568d":[],"bff76000-63fd-11ee-b6ac-53c29e67568d":[],"01a21b50-6401-11ee-b6ac-53c29e67568d":[],"044c7ad0-6401-11ee-b6ac-53c29e67568d":[],"94958a10-6455-11ee-9f26-31ef1f150e5a":[],"fadc16c0-6579-11ee-9f26-31ef1f150e5a":[],"6e4ba210-657a-11ee-9f26-31ef1f150e5a":[{"config":{"x_axis_column":"timestamp","y_axis_column":"dist_to_next_stop","series_column":"","x_axis_label":"Time","y_axis_label":"Distance to Next Stop","color_scheme":"spectral","title":"Distances to the Next Stop for Solver's Truck 305"},"id":"74f83370-657b-11ee-9f26-31ef1f150e5a","name":"Line Chart Visualization","description":"Description for line chart visualization","block_id":"6e4ba210-657a-11ee-9f26-31ef1f150e5a","visualization_type_id":"b565ab86-0964-4e75-aed9-a11ba79fae43","created_at":"2023-10-08T01:39:01.287Z","updated_at":"2023-10-08T01:48:59.329Z","blockId":"6e4ba210-657a-11ee-9f26-31ef1f150e5a","visualizationTypeId":"b565ab86-0964-4e75-aed9-a11ba79fae43"}],"798c7e10-657a-11ee-9f26-31ef1f150e5a":[],"7b577a10-657a-11ee-9f26-31ef1f150e5a":[{"config":{"x_axis_column":"timestamp","y_axis_column":"dist_to_next_stop","series_column":"","x_axis_label":"Time","y_axis_label":"Distance to Next Stop","color_scheme":"spectral","title":"Distances to the Next Stop for Actual Truck 305"},"id":"afba5b40-657c-11ee-9f26-31ef1f150e5a","name":"Line Chart Visualization","description":"Description for line chart visualization","block_id":"7b577a10-657a-11ee-9f26-31ef1f150e5a","visualization_type_id":"b565ab86-0964-4e75-aed9-a11ba79fae43","created_at":"2023-10-08T01:47:49.365Z","updated_at":"2023-10-08T01:49:22.212Z","blockId":"7b577a10-657a-11ee-9f26-31ef1f150e5a","visualizationTypeId":"b565ab86-0964-4e75-aed9-a11ba79fae43"}],"d6598170-66c3-11ee-9f26-31ef1f150e5a":[],"67592530-66c5-11ee-9f26-31ef1f150e5a":[],"5d0dbad0-66c7-11ee-9f26-31ef1f150e5a":[{"config":{"html_source":"<div align=\"center\">\n<img src=\"https://www.dropbox.com/scl/fi/j3vd93a18i3hv7ulyopbe/MSDO-Picture.jpg?rlkey=ytqreo70o6wbp1so6vmoa054g&raw=1\" width=\"700\">\n</div>\n\n<b>WHAT'S THE MOST EFFICIENT WAY FOR A FLEET OF DELIVERY TRUCKS TO SERVER A DIVERSE SET OF CUSTOMERS?</b>\nThis SQL workbook showcases how to leverage Kinetica’s Multiple Supply Demand Optimization (MSDO) Graph Solver, a powerful tool designed for complex, real-time routing optimization. The workbook walks you through a scenario involving 30 customers and 21 trucks, originating from 13 supply depots in the Washington DC area. Unlike traditional solvers, the MSDO solver considers a multitude of constraints, such as package volume, truck capacity, and even real-time conditions, to find the optimal route for each truck. Real-time GPS data for simulated routes for each truck is streamed into Kinetica via Kafka, enabling immediate comparison and alerting for any significant deviations from the optimal routes.\nThe workbook is divided into three main sections:\n- Data setup, where we prepare the data sources, tables, and a graph representation of the Washington DC road network;\n- Optimal route calculation using the MSDO solver;\n- Real-time monitoring and alerting for route deviations.\nBy the end of this workbook, you’ll gain a comprehensive understanding of how to implement sophisticated, real-time routing optimizations using Kinetica’s MSDO solver.\n<b>WHAT IS MATCH SUPPLY DEMAND OPTIMIZATION?</b>\nMatching supply chain logistics to demand-based routing is a complex but crucial daily task for companies like Amazon and Uber. The main goal is to efficiently plan routes for delivery or transportation while considering various industry-specific constraints. To tackle this challenge, Kinetica developed a versatile solution called the Multiple Supply Demand Chain Optimization (MSDO) graph solver. It can optimize the transportation of items like power, fuel, or goods, where both the supply and demand quantities are variable. \nFor example, it helps determine the best routes for trucks with varying capacities to deliver goods to different locations across a large area. Ultimately, the aim is to minimize transportation costs, whether in terms of distance traveled or delivery time, while adhering to various network constraints.\n<b>HOW TO RUN?</b>\nAll the steps and instructions are provided within the workbook itself. \nTo ensure successful execution of the workbook, it is essential to adhere to the prescribed order of blocks and sheets. We will create all the necessary data sources and download the required data into our workbook.\n\n","title":""},"id":"5d5ac960-66c7-11ee-9f26-31ef1f150e5a","name":"HTML Visualization","description":"Description for html visualization","block_id":"5d0dbad0-66c7-11ee-9f26-31ef1f150e5a","visualization_type_id":"757cd7cb-6f08-4416-9e9a-291cd651246f","created_at":"2023-10-09T17:14:54.583Z","updated_at":"2023-10-10T00:49:59.373Z","blockId":"5d0dbad0-66c7-11ee-9f26-31ef1f150e5a","visualizationTypeId":"757cd7cb-6f08-4416-9e9a-291cd651246f"}]}}