{"workbook":{"metadata":{},"config":{},"id":"56c9ffc0-b4c1-11ed-9d24-9f83dc89ba74","name":"Real-Time Financial Risk","description":"In this demo, we set up a real-time risk monitoring system with Kinetica that alerts investors as and when portfolio values fall below certain thresholds. This is a really simple demo that solves a challenging problem. The steps broadly are the following.\n1. Plug into streaming and static data sources and load the data into relational tables in Kinetica\n2. Setup a continuously updated risk monitoring view that combines portfolio holdings data with real time stock prices\n3. Setup up alerts via webhooks and/or sink the data to a Kafka topic\nAll of this is done with just a few simple SQL statements and relational tables.","user_id":"a14c1650-2236-11ed-8a68-5194ba1cb631","warehouse_id":null,"is_example":false,"is_shared":false,"created_at":"2022-03-02T19:44:09.007Z","updated_at":"2023-02-25T04:03:19.612Z","userId":"a14c1650-2236-11ed-8a68-5194ba1cb631"},"worksheets":[{"config":{},"id":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","name":"1. Load the data","description":"Description for Sheet 1","previous_worksheet_id":"57dccf50-b4c1-11ed-9d24-9f83dc89ba74","next_worksheet_id":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","workbook_id":"56c9ffc0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-02T19:44:09.084Z","updated_at":"2023-02-25T04:03:21.723Z","workbookId":"56c9ffc0-b4c1-11ed-9d24-9f83dc89ba74"},{"config":{},"id":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","name":"2. Set up the views","description":"Setup the different materialized views that will feed that alerts","previous_worksheet_id":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","next_worksheet_id":"57a6cb30-b4c1-11ed-9d24-9f83dc89ba74","workbook_id":"56c9ffc0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-07T22:14:27.342Z","updated_at":"2023-02-25T04:03:21.743Z","workbookId":"56c9ffc0-b4c1-11ed-9d24-9f83dc89ba74"},{"config":{},"id":"57a6cb30-b4c1-11ed-9d24-9f83dc89ba74","name":"3. Set up outbound decisioning","description":"Description for sheet 3","previous_worksheet_id":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","next_worksheet_id":null,"workbook_id":"56c9ffc0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-08T18:39:00.250Z","updated_at":"2023-02-25T04:05:05.160Z","workbookId":"56c9ffc0-b4c1-11ed-9d24-9f83dc89ba74"},{"config":{},"id":"57dccf50-b4c1-11ed-9d24-9f83dc89ba74","name":"About this demo","description":"Description\n","previous_worksheet_id":null,"next_worksheet_id":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","workbook_id":"56c9ffc0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-07-06T18:38:33.376Z","updated_at":"2023-02-25T04:03:21.780Z","workbookId":"56c9ffc0-b4c1-11ed-9d24-9f83dc89ba74"}],"blockMap":{"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74":[{"config":{},"id":"56d4ae20-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"The steps for loading data\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"The process for ingesting data from remote data sources is listed below. The first two steps are optional but recommended.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"1. Create a Schema (Optional): Schemas are containers for tables and other database objects that provide a unique namespace within them. Tables that are created without a schema specified will be placed in the default schema \"},{\"text\":\"ki_home\",\"italic\":true},{\"text\":\".\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"2. Create the table (Optional): Kinetica has a robust type inferencing system that can infer column specifications as the data is being ingested. If you skip this step, Kinetica will infer the types and create the table when the data is being ingested.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"3. Create the data source: Remote data storage locations need to be registered as data sources. \"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"4. Load the data: There are a few different ways to do this. The most straightforward way is to use the LOAD INTO command to ingest the data into a Kinetica cluster. Tables that are loaded in this manner are persisted on the cluster.\"}]}]","previous_block_id":null,"next_block_id":"56f94d20-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-02T19:53:10.007Z","updated_at":"2023-02-25T04:03:20.180Z","worksheetId":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"56dcc470-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"\"CREATE OR REPLACE DATA SOURCE static_13F\\nLOCATION = 'S3' \\nWITH OPTIONS (\\n    ANONYMOUS = 'true',\\n    BUCKET NAME = 'kinetica-examples-data-public',\\n    REGION = 'us-east-1'\\n)\"","previous_block_id":"5703fb80-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"5708dd80-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-02T20:12:13.297Z","updated_at":"2023-02-25T04:03:59.498Z","worksheetId":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"56e13140-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"\"LOAD DATA INTO filings_quarterly\\nFROM FILE PATHS '13F/consolidated.csv'\\nFORMAT TEXT\\nWITH OPTIONS (\\n    DATA SOURCE = 'static_13F'\\n)\"","previous_block_id":"5712c890-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"57173560-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-02T20:12:31.694Z","updated_at":"2023-02-25T04:03:20.234Z","worksheetId":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"56e6af80-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"\"LOAD DATA INTO px_streaming_quotes\\nFORMAT JSON \\nWITH OPTIONS (\\n    DATA SOURCE = 'streaming_13F',\\n    SUBSCRIBE = TRUE,\\n    TYPE_INFERENCE_MODE = 'speed',\\n    ERROR_HANDLING = 'permissive',\\n    kafka_subscription_cancel_after = 120 -- cancels the stream after 120 minutes\\n)\"","previous_block_id":"571d9e00-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":null,"block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-04T01:08:52.358Z","updated_at":"2023-02-25T04:04:32.630Z","worksheetId":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"56ee77b0-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"\"CREATE OR REPLACE DATA SOURCE streaming_13F\\nLOCATION = 'kafka://pkc-ep9mm.us-east-2.aws.confluent.cloud:9092'\\nWITH OPTIONS \\n(\\n    kafka_topic_name =  'px-equities-trades',\\n    credential = 'fin_risk_creds'\\n)\"","previous_block_id":"56f44410-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"5712c890-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-04T01:09:05.920Z","updated_at":"2023-02-25T04:03:20.286Z","worksheetId":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"56f44410-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"\"CREATE OR REPLACE CREDENTIAL fin_risk_creds\\nTYPE = 'kafka',\\nIDENTITY = '' ,\\nSECRET = ''\\nWITH OPTIONS (  \\n   'security.protocol' = 'SASL_SSL',\\n   'sasl.mechanism' = 'PLAIN',\\n   'sasl.username' = 'QZN62QB2RBTLW74L',\\n   'sasl.password' = 'iiJDdKeBzf5ms5EInLvpRslW1zwsTYx9tjZ1pQyVoS+gPGkyNms6eMXPaR6y+GST'\\n   )\"","previous_block_id":"5708dd80-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"56ee77b0-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-04T01:10:18.006Z","updated_at":"2023-02-25T04:03:20.312Z","worksheetId":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"56f94d20-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"\"-- Create the filings table\\nCREATE OR REPLACE TABLE filings_quarterly\\n(\\n   \\\"company\\\" VARCHAR (128, DICT) NOT NULL,\\n   \\\"filing\\\" DATETIME NOT NULL,\\n   \\\"y\\\" INTEGER NOT NULL,\\n   \\\"m\\\" INTEGER NOT NULL,\\n   \\\"Stock\\\" VARCHAR NOT NULL,\\n   \\\"Symbol\\\" VARCHAR (64, DICT) NOT NULL,\\n   \\\"Type\\\" VARCHAR (32) NOT NULL,\\n   \\\"Shares_Held\\\" DECIMAL(18,4) NOT NULL,\\n   \\\"Market_Value\\\" DECIMAL(18,4) NOT NULL,\\n   \\\"pct_Portfolio\\\" DECIMAL(18,4),\\n   \\\"Change_in_shares\\\" DECIMAL(18,4) NOT NULL,\\n   \\\"Change_Type\\\" VARCHAR (64, DICT),\\n   \\\"pctOwnership\\\" VARCHAR (64) NOT NULL,\\n   \\\"sector\\\" VARCHAR (128, DICT) NOT NULL,\\n   \\\"source_type\\\" VARCHAR (32) NOT NULL,\\n   \\\"source_date\\\" VARCHAR (32) NOT NULL,\\n   \\\"AvgPrice\\\" DECIMAL(18,4)\\n)\"","previous_block_id":"56d4ae20-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"56ff8eb0-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-07T20:32:41.780Z","updated_at":"2023-02-25T04:03:20.338Z","worksheetId":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"56ff8eb0-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"\"-- Create the EOD price table\\nCREATE OR REPLACE TABLE px_eod\\n(\\n   \\\"Symbol\\\" VARCHAR (8, DICT) NOT NULL,\\n   \\\"Date\\\" VARCHAR (16, DICT) NOT NULL,\\n   \\\"Open\\\" DECIMAL(18,4),\\n   \\\"High\\\" DECIMAL(18,4),\\n   \\\"Low\\\" DECIMAL(18,4),\\n   \\\"Close\\\" DECIMAL(18,4),\\n   \\\"Volume\\\" INTEGER\\n)\"","previous_block_id":"56f94d20-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"570dbf80-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-07T20:32:49.330Z","updated_at":"2023-02-25T04:03:20.392Z","worksheetId":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"5703fb80-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"CREATE THE STATIC DATA SOURCE\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Both the static datasets are available via a public S3 bucket - guidesdatapublic. We register a data source called 13F that references this externally maintained data. Note that we are not using any credentials to access this data because the permissions on the S3 bucket are set to be public. See the section below\"}]}]","previous_block_id":"570dbf80-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"56dcc470-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-07T20:34:23.920Z","updated_at":"2023-02-25T04:03:20.421Z","worksheetId":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"5708dd80-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"CREATE THE STREAMING DATA SOURCE\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"The real time exchange rate data is maintained as a Kafka topic on Confluent cloud. First we will create a credential and then we create the data source.\"}]}]","previous_block_id":"56dcc470-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"56f44410-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-07T21:40:51.086Z","updated_at":"2023-02-25T04:03:20.442Z","worksheetId":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"570dbf80-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"\"-- Create the table for real time exchange rate\\nCREATE OR REPLACE TABLE px_streaming_quotes\\n(\\n   \\\"symbol\\\" VARCHAR (8, DICT) NOT NULL,\\n   \\\"px_last\\\" DOUBLE NOT NULL,\\n   \\\"px_timestamp\\\" DATETIME NOT NULL,\\n   \\\"size\\\" SMALLINT NOT NULL\\n)\"","previous_block_id":"56ff8eb0-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"5703fb80-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-07T21:43:08.611Z","updated_at":"2023-02-25T04:03:20.468Z","worksheetId":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"5712c890-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"LOAD DATA\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Now that we have defined the data sources, we can load the data that is located in them to tables in Kinetica (that we defined earlier). \"}]}]","previous_block_id":"56ee77b0-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"56e13140-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-07T21:52:20.471Z","updated_at":"2023-02-25T04:03:20.491Z","worksheetId":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"57173560-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"\"LOAD DATA INTO px_eod\\nFROM FILE PATHS '13F/pxeod.csv'\\nFORMAT TEXT\\nWITH OPTIONS (\\n    DATA SOURCE = 'static_13F'\\n)\"","previous_block_id":"56e13140-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"571d9e00-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-07T22:09:08.403Z","updated_at":"2023-02-25T04:03:20.515Z","worksheetId":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"571d9e00-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"The streaming ingest below will continuously ingest data from the Kafka topic.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"âœŽ NOTE\",\"bold\":true},{\"text\":\": The last sheet in the workbook contains code to pause the subscription. Make sure to do so to prevent taking up too much disk space.\"}]}]","previous_block_id":"57173560-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"56e6af80-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-10T21:57:40.956Z","updated_at":"2023-02-25T04:03:20.534Z","worksheetId":"56cf2fe0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"}],"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74":[{"config":{"isBlockVisible":true},"id":"575e7790-b4c1-11ed-9d24-9f83dc89ba74","name":"Block 1","description":"Description for Block 1","content":"\"CREATE or REPLACE MATERIALIZED VIEW holdings_eod\\nREFRESH ON QUERY AS \\nSELECT company, SUM(fq.Shares_Held*p.High) as Total_Current_Value\\nFROM recent_filing fq, px_eod p\\nWHERE fq.Symbol = p.Symbol\\nGROUP BY company;\\n\\nSELECT * FROM holdings_eod\"","previous_block_id":"57786830-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"57670310-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-07T22:14:27.423Z","updated_at":"2023-02-25T04:03:20.873Z","worksheetId":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"57629640-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"Filter the most recent quarterly filing\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"The 13F quarterly filing data has filings from several quarters and includes information on derivatives as well as stock holdings. We however, only need stock holdings data from the most recent quarter, which is for Q1 - 2021. Kinetica supports the creation of materialized views. We can use that to create a view with the data we need.\"}]}]","previous_block_id":null,"next_block_id":"577d2320-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-07T22:14:56.829Z","updated_at":"2023-02-25T04:03:20.896Z","worksheetId":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"57670310-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"The real time approach to risk management\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Combines a streaming second by milli-second view on portfolio holdings. Kinetica offers materialized views that can be used to set up queries that are continuously refreshed when new data is received via a streaming ingest. The code below computes a measure of change in overall portfolio value from the earliest price values in a day with the most recent. \"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Note\",\"bold\":true},{\"text\":\": Even though we are looking at a static representation of portfolio holdings that is being combined with a streaming prices data, Kinetica can easily combine two different streaming data sources as well. This is possible even when the two data streams are being recorded on different timestamps (using ASOF joins). \"}]}]","previous_block_id":"575e7790-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"5771b170-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-08T18:35:48.905Z","updated_at":"2023-02-25T04:03:20.918Z","worksheetId":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"576bbe00-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"Portfolio Alerts\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"The table calculates a materialized view of the change in portfolio value that refreshes itself every 5 seconds. We can use that to create another alert table that records whenever the change in portfolio value crosses a certain threshold.\"}]}]","previous_block_id":"5771b170-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"5781de10-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-08T18:35:53.575Z","updated_at":"2023-02-25T04:03:20.946Z","worksheetId":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{"isBlockVisible":true},"id":"5771b170-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"\"CREATE or REPLACE MATERIALIZED VIEW holdings_streaming_scaled\\nREFRESH EVERY 5 SECONDS AS \\nSELECT \\n    company, \\n    100 * (\\n        SUM(fq.Shares_Held*p.px_last) / \\n        SUM(fq.Shares_Held*p_earliest.px_last)\\n        ) as \\\"portfolio_change\\\", \\n    p.px_timestamp \\n    FROM \\n        recent_filing fq, \\n        px_streaming_quotes p, \\n        px_streaming_quotes p_earliest\\n    WHERE \\n        p_earliest.Symbol = fq.Symbol AND \\n        p_earliest.px_timestamp = \\n            (SELECT MIN(px_timestamp) FROM px_streaming_quotes) AND \\n        fq.Symbol=p.Symbol\\n    GROUP BY p.px_timestamp, company\\n    ORDER BY p.px_timestamp \\n    \"","previous_block_id":"57670310-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"576bbe00-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-08T18:35:58.887Z","updated_at":"2023-02-25T04:03:20.965Z","worksheetId":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"57786830-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"The traditional approach to risk management\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Combine portfolio holdings with share prices at the end of the day to get an estimate of the overall values. This would then be fed into some downstream estimate for risk.\"}]}]","previous_block_id":"577d2320-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"575e7790-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-08T21:48:04.868Z","updated_at":"2023-02-25T04:03:20.982Z","worksheetId":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"577d2320-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"\"CREATE OR REPLACE MATERIALIZED VIEW recent_filing AS\\nSELECT * \\n    FROM filings_quarterly \\n    WHERE \\n        filing=(select max(filing) from filings_quarterly) AND \\n        type NOT IN ('CALL', 'PUT') \\n\"","previous_block_id":"57629640-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"57786830-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-08T23:37:05.724Z","updated_at":"2023-02-25T04:03:21.007Z","worksheetId":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"5781de10-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"\"CREATE OR REPLACE MATERIALIZED VIEW portfolio_alert\\nREFRESH EVERY 5 SECONDS AS \\nSELECT *\\nFROM holdings_streaming_scaled p\\nWHERE (100 - p.portfolio_change) > 0.001;\\n\"","previous_block_id":"576bbe00-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"57873540-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-10T22:17:10.318Z","updated_at":"2023-02-25T04:03:21.023Z","worksheetId":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"57873540-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"\"SELECT * FROM portfolio_alert;\"","previous_block_id":"5781de10-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":null,"block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-11T17:19:57.870Z","updated_at":"2023-02-25T04:03:21.042Z","worksheetId":"5759e3b0-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"}],"57a6cb30-b4c1-11ed-9d24-9f83dc89ba74":[{"config":{},"id":"57ace5b0-b4c1-11ed-9d24-9f83dc89ba74","name":"Block 1","description":"Description for Block 1","content":"\"-- CREATE OR REPLACE DATA SINK fin_risk_sink\\n-- LOCATION = '<kafka cluster address>'\\n-- WITH OPTIONS \\n-- (\\n--     'kafka_topic_name' =  'topic name',\\n--     credential = 'your credentials'\\n-- )\"","previous_block_id":"57bd1250-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"57b52310-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"57a6cb30-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-08T18:39:00.332Z","updated_at":"2023-02-25T04:03:21.274Z","worksheetId":"57a6cb30-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"57b06820-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"Set up automated alerts\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Now that we have the views created, we can set up alerts based on certain triggers. There are a few different ways to do it. We could set up a Kafka data sink that receives all new records from the portfolio alert table that we created in the previous sheet. We can use webhooks to setup alerts on applications like Slack etc.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"For this demo, we recommend using the website: https://webhook.site/ to generate a webhook URL. Copy the webhook URL and paste it as the destination in the stream below. This will send alerts to that URL.\"}]}]","previous_block_id":null,"next_block_id":"57b85760-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"57a6cb30-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-08T18:39:31.671Z","updated_at":"2023-02-25T04:03:21.294Z","worksheetId":"57a6cb30-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"57b52310-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"\"-- CREATE STREAM portfolio_alert_stream on \\n-- TABLE portfolio_alert\\n-- WITH OPTIONS \\n-- (\\n--     event = 'insert', \\n--     datasink_name = 'fin_risk_sink'\\n-- )\"","previous_block_id":"57ace5b0-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":null,"block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"57a6cb30-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-08T18:39:40.640Z","updated_at":"2023-02-25T04:03:21.313Z","worksheetId":"57a6cb30-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"57b85760-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"\"CREATE STREAM alert_webhook_fin_risk\\nON TABLE portfolio_alert\\nWITH OPTIONS \\n(\\n    DESTINATION = 'WEBHOOK_URL' -- 'Paste your Webhook URL (see above)'\\n)\"","previous_block_id":"57b06820-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"57c4da80-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"57a6cb30-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-11T01:44:02.372Z","updated_at":"2023-02-25T04:03:21.330Z","worksheetId":"57a6cb30-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"57bd1250-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"Kafka sink\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"You can also send the alerts to a Kafka topic. Uncomment the code below and update the details for your Kafka cluster to point the alerts to a Kafka topic, which can then be used in downstream analytics or triggers.\"}]}]","previous_block_id":"57c094c0-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"57ace5b0-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"57a6cb30-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-11T19:05:28.871Z","updated_at":"2023-02-25T04:03:21.351Z","worksheetId":"57a6cb30-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"57c094c0-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"\"-- CREATE STREAM alert_slack_fin_risk\\n-- ON TABLE portfolio_alert\\n-- WITH OPTIONS \\n-- (\\n--     DESTINATION = 'https://hooks.slack.com/services/<ENTER YOUR KEY>'\\n-- )\\n\"","previous_block_id":"57c4da80-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"57bd1250-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"84b9233c-14e3-11eb-adc1-0242ac120002","worksheet_id":"57a6cb30-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-31T18:46:06.511Z","updated_at":"2023-02-25T04:03:21.372Z","worksheetId":"57a6cb30-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"84b9233c-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"57c4da80-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"Slack alerts\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"The pattern above can be used to setup slack alerts as well. You can follow the instructions here: https://api.slack.com/messaging/webhooks, if you would like to implement this on your own.\"}]}]","previous_block_id":"57b85760-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"57c094c0-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"57a6cb30-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-03-31T18:47:08.890Z","updated_at":"2023-02-25T04:03:21.391Z","worksheetId":"57a6cb30-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"}],"57dccf50-b4c1-11ed-9d24-9f83dc89ba74":[{"config":{},"id":"57e1d860-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"bold\":true,\"text\":\"PEEKING REAL-TIME INTO THE WORLD'S TOP INVESTORS\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Many of the world's storied investors are Hedge Funds. Unlike mutual funds, to which most people have access to, hedge funds cater to institutions and wealthy investors. Fortunately, four times a year, we get a peek into this secretive world by way of regulatory filings. Hedge funds holdings give us a unique view into their thinking c/o the bets they are making.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"While holdings are published only quarterly, we have real-time information on the value of their known holdings -- so we can walk-forward the value of their holdings. This has traditionally been an academic curiosity, but with recent hedge fund blow-ups, this is now a practical exercise as well.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"In this demo, we show how Kinetica can be used to set up a risk monitoring system that automatically triggers alerts based on shifts in portfolio values.\"}]}]","previous_block_id":null,"next_block_id":"57e6e170-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"57dccf50-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-07-06T18:39:37.840Z","updated_at":"2023-02-25T04:03:21.538Z","worksheetId":"57dccf50-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"57e6e170-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"DATASETS\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"We will be using three datasets to drive our optimizations:\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Two are static files, both hosted in an S3 bucket on AWS:\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"     - SEC 13-F filings (up to Q1 - 2021)\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"     - End of day price file (for Jan-29th, 2021)\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"The final dataset is a 24-7 real-time stream of real exchange prices that simulates market movements. This is available as a Kafka topic that can be consumed directly from Confluent Cloud.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"\"}]}]","previous_block_id":"57e1d860-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":"57eb9c60-b4c1-11ed-9d24-9f83dc89ba74","block_type_id":"a9949a1a-14e3-11eb-adc1-0242ac120002","worksheet_id":"57dccf50-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-07-06T18:40:24.228Z","updated_at":"2023-02-25T04:03:21.578Z","worksheetId":"57dccf50-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"a9949a1a-14e3-11eb-adc1-0242ac120002"},{"config":{},"id":"57eb9c60-b4c1-11ed-9d24-9f83dc89ba74","name":"Block","description":"Description for Block","content":"{}","previous_block_id":"57e6e170-b4c1-11ed-9d24-9f83dc89ba74","next_block_id":null,"block_type_id":"d7d34b22-2aa2-484f-9e8e-106f62612caf","worksheet_id":"57dccf50-b4c1-11ed-9d24-9f83dc89ba74","created_at":"2022-07-06T18:41:15.343Z","updated_at":"2023-02-25T04:03:21.596Z","worksheetId":"57dccf50-b4c1-11ed-9d24-9f83dc89ba74","blockTypeId":"d7d34b22-2aa2-484f-9e8e-106f62612caf"}]},"vizMap":{"56d4ae20-b4c1-11ed-9d24-9f83dc89ba74":[],"56dcc470-b4c1-11ed-9d24-9f83dc89ba74":[],"56e13140-b4c1-11ed-9d24-9f83dc89ba74":[],"56e6af80-b4c1-11ed-9d24-9f83dc89ba74":[],"56ee77b0-b4c1-11ed-9d24-9f83dc89ba74":[],"56f44410-b4c1-11ed-9d24-9f83dc89ba74":[],"56f94d20-b4c1-11ed-9d24-9f83dc89ba74":[],"56ff8eb0-b4c1-11ed-9d24-9f83dc89ba74":[],"5703fb80-b4c1-11ed-9d24-9f83dc89ba74":[],"5708dd80-b4c1-11ed-9d24-9f83dc89ba74":[],"570dbf80-b4c1-11ed-9d24-9f83dc89ba74":[],"5712c890-b4c1-11ed-9d24-9f83dc89ba74":[],"57173560-b4c1-11ed-9d24-9f83dc89ba74":[],"571d9e00-b4c1-11ed-9d24-9f83dc89ba74":[],"575e7790-b4c1-11ed-9d24-9f83dc89ba74":[],"57629640-b4c1-11ed-9d24-9f83dc89ba74":[],"57670310-b4c1-11ed-9d24-9f83dc89ba74":[],"576bbe00-b4c1-11ed-9d24-9f83dc89ba74":[],"5771b170-b4c1-11ed-9d24-9f83dc89ba74":[],"57786830-b4c1-11ed-9d24-9f83dc89ba74":[],"577d2320-b4c1-11ed-9d24-9f83dc89ba74":[],"5781de10-b4c1-11ed-9d24-9f83dc89ba74":[],"57873540-b4c1-11ed-9d24-9f83dc89ba74":[],"57ace5b0-b4c1-11ed-9d24-9f83dc89ba74":[],"57b06820-b4c1-11ed-9d24-9f83dc89ba74":[],"57b52310-b4c1-11ed-9d24-9f83dc89ba74":[],"57b85760-b4c1-11ed-9d24-9f83dc89ba74":[],"57bd1250-b4c1-11ed-9d24-9f83dc89ba74":[],"57c094c0-b4c1-11ed-9d24-9f83dc89ba74":[],"57c4da80-b4c1-11ed-9d24-9f83dc89ba74":[],"57e1d860-b4c1-11ed-9d24-9f83dc89ba74":[],"57e6e170-b4c1-11ed-9d24-9f83dc89ba74":[],"57eb9c60-b4c1-11ed-9d24-9f83dc89ba74":[{"config":{"html_source":"<h2>Video Explainer</2>\n<h3 align='center'>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/YQ7lpxwjlPY\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</h3>"},"id":"57efe220-b4c1-11ed-9d24-9f83dc89ba74","name":"HTML Visualization","description":"Description for html visualization","block_id":"57eb9c60-b4c1-11ed-9d24-9f83dc89ba74","visualization_type_id":"757cd7cb-6f08-4416-9e9a-291cd651246f","created_at":"2022-07-06T18:41:15.402Z","updated_at":"2023-02-25T04:03:21.538Z","blockId":"57eb9c60-b4c1-11ed-9d24-9f83dc89ba74","visualizationTypeId":"757cd7cb-6f08-4416-9e9a-291cd651246f"}]}}